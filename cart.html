<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ö–æ—à–∏–∫</title>
  <link rel="stylesheet" href="cart.style.css">
</head>
<body>
  
  <div class="header-right">
    <a href="cart.html" class="cart-button" title="–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–æ—à–∏–∫">
      <i class="fas fa-shopping-cart"></i>
    </a>
  </div>
<div class = "changetem">
  <button id="toggle-theme" class="toggle-theme-button">üåô/‚òÄÔ∏è</button>
</div>
 
  <section class="cart-container">
    <h1 class="cart-title">–í–∞—à –∫–æ—à–∏–∫</h1>
    <div class="cart-items"></div>

    <div class="cart-summary">
      <p>–ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞: <span id="total-price">0 –≥—Ä–Ω</span></p>
      <button id="openSidebarBtn" class="checkout-button">–ó–∞–º–æ–≤–∏—Ç–∏</button>
      <button class="clear-cart" onclick="clearCart()">–û—á–∏—Å—Ç–∏—Ç–∏ –∫–æ—à–∏–∫</button>
      <button class="back-to-home" onclick="window.location.href='index.html'">–ù–∞ –≥–æ–ª–æ–≤–Ω—É</button>
    </div>
  </section>
  

<div id="orderSidebar" class="sidebar">
  <div class="sidebar-header">
    <h2>–û—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</h2>
    <span id="closeSidebarBtn">&times;</span>
  </div>
  <form id="orderForm" class="sidebar-form">
    <label for="firstName">–Ü–º'—è</label>
    <input type="text" id="firstName" name="firstName" required>

    <label for="lastName">–ü—Ä—ñ–∑–≤–∏—â–µ</label>
    <input type="text" id="lastName" name="lastName" required>

    <label for="middleName">–ü–æ-–±–∞—Ç—å–∫–æ–≤—ñ</label>
    <input type="text" id="middleName" name="middleName">

    <label for="city">–ú—ñ—Å—Ç–æ</label>
    <input type="text" id="city" name="city" required>

    <label for="phone">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É</label>
    <input type="tel" id="phone" name="phone" required pattern="[0-9+ -]{10,15}">

    <label for="pickupPoint">–¢–æ—á–∫–∞ –≤–∏–¥–∞—á—ñ</label>
    <input type="text" id="pickupPoint" name="pickupPoint" required>

    <label for="payment">–°–ø–æ—Å—ñ–± –æ–ø–ª–∞—Ç–∏</label>
    <select id="payment" name="payment" required>
      <option value="">–û–±–µ—Ä—ñ—Ç—å —Å–ø–æ—Å—ñ–± –æ–ø–ª–∞—Ç–∏</option>
      <option value="cash">–ì–æ—Ç—ñ–≤–∫–∞</option>
      <option value="card">–ö–∞—Ä—Ç–∫–∞ –æ–Ω–ª–∞–π–Ω</option>
    </select>

    <button type="submit" class="submit-button">–ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
  </form>
</div>

<!-- –ó–∞—Ç–µ–º–Ω–µ–Ω–Ω—è —Ñ–æ–Ω—É -->
<div id="overlay" class="overlay"></div>

 <script>
    function loadCart() {
      const cart = JSON.parse(localStorage.getItem('cart')) || [];
      const cartContainer = document.querySelector('.cart-items');
      cartContainer.innerHTML = '';
      let total = 0;

      cart.forEach(item => {
        const cartItem = document.createElement('div');
        cartItem.className = 'cart-item';
        cartItem.innerHTML = `
          <div class="product-image-wrapper">
            <img src="${item.image}" alt="${item.title}" class="product-image" style="width: 80px; height: 80px; object-fit: cover;">
          </div>
          <div class="product-details">
            <h3>${item.title}</h3>
            <p>–¶—ñ–Ω–∞: ${item.price} –≥—Ä–Ω</p>
            <div class="quantity-controls">
              <button onclick="decreaseQuantity('${item.title}')">-</button>
              <input type="number" value="${item.quantity}" min="1" onchange="changeQuantity('${item.title}', this.value)">
              <button onclick="increaseQuantity('${item.title}')">+</button>
            </div>
            <p>–†–∞–∑–æ–º: <span>${item.price * item.quantity} –≥—Ä–Ω</span></p>
            <button class="remove-item" onclick="removeItem('${item.title}')">–í–∏–¥–∞–ª–∏—Ç–∏</button>
          </div>
        `;
        cartContainer.appendChild(cartItem);
        total += item.price * item.quantity;
      });

      document.getElementById('total-price').innerText = total + ' –≥—Ä–Ω';
      updateCartCount();
    }

    // –§—É–Ω–∫—Ü—ñ—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—É –¥–æ –∫–æ—à–∏–∫–∞
    function addToCart(title, price, image) {
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      let existingProduct = cart.find(item => item.title === title);

      if (existingProduct) {
        existingProduct.quantity++;
      } else {
        cart.push({ title, price, image, quantity: 1 });
      }

      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartCount();
    }

    // –ó–±—ñ–ª—å—à–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å
    function increaseQuantity(title) {
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      let product = cart.find(item => item.title === title);

      if (product) {
        product.quantity++;
        localStorage.setItem('cart', JSON.stringify(cart));
        loadCart();
      }
    }

    // –ó–º–µ–Ω—à–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å
    function decreaseQuantity(title) {
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      let product = cart.find(item => item.title === title);

      if (product && product.quantity > 1) {
        product.quantity--;
        localStorage.setItem('cart', JSON.stringify(cart));
        loadCart();
      }
    }

    // –ó–º—ñ–Ω–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤—Ä—É—á–Ω—É
    function changeQuantity(title, quantity) {
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      let product = cart.find(item => item.title === title);

      if (product) {
        product.quantity = parseInt(quantity);
        if (product.quantity < 1) product.quantity = 1;
        localStorage.setItem('cart', JSON.stringify(cart));
        loadCart();
      }
    }

    // –í–∏–¥–∞–ª–∏—Ç–∏ —Ç–æ–≤–∞—Ä –∑ –∫–æ—à–∏–∫–∞
    function removeItem(title) {
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      cart = cart.filter(item => item.title !== title);
      localStorage.setItem('cart', JSON.stringify(cart));
      loadCart();
    }

    // –û—á–∏—Å—Ç–∏—Ç–∏ –∫–æ—à–∏–∫
    function clearCart() {
      localStorage.removeItem('cart');
      loadCart();
      alert('–í–∞—à –∫–æ—à–∏–∫ –æ—á–∏—â–µ–Ω–æ!');
    }

    // –û–Ω–æ–≤–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–æ–≤–∞—Ä—ñ–≤ –±—ñ–ª—è —ñ–∫–æ–Ω–∫–∏ –∫–æ—à–∏–∫–∞
    function updateCartCount() {
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      let count = cart.reduce((sum, item) => sum + item.quantity, 0);
      document.getElementById('cart-count').innerText = count;
    }

    // –ü—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
    window.onload = function() {
      loadCart();
    };

const openSidebarBtn = document.getElementById('openSidebarBtn');
const closeSidebarBtn = document.getElementById('closeSidebarBtn');
const sidebar = document.getElementById('orderSidebar');
const overlay = document.getElementById('overlay');
const orderForm = document.getElementById('orderForm');

// –í—ñ–¥–∫—Ä–∏—Ç–∏ –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ
openSidebarBtn.addEventListener('click', () => {
  sidebar.classList.add('active');
  overlay.classList.add('active');
});

// –ó–∞–∫—Ä–∏—Ç–∏ –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ
closeSidebarBtn.addEventListener('click', () => {
  sidebar.classList.remove('active');
  overlay.classList.remove('active');
});

overlay.addEventListener('click', () => {
  sidebar.classList.remove('active');
  overlay.classList.remove('active');
});

// –ü—Ä–∏ –≤—ñ–¥–ø—Ä–∞–≤—Ü—ñ —Ñ–æ—Ä–º–∏
orderForm.addEventListener('submit', (e) => {
  e.preventDefault();
  alert('–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è —É—Å–ø—ñ—à–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–µ!');
  sidebar.classList.remove('active');
  overlay.classList.remove('active');
  orderForm.reset();
});

// –§—É–Ω–∫—Ü—ñ—è –∑–º—ñ–Ω–∏ —Ç–µ–º–∏
function toggleTheme() {
    const body = document.body;
    const isDark = body.classList.toggle('dark-theme'); // –î–æ–¥–∞—î –∞–±–æ –∑–∞–±–∏—Ä–∞—î –∫–ª–∞—Å

    // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –≤–∏–±—ñ—Ä —É localStorage
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
    console.log(`–ü–µ—Ä–µ–º–∫–Ω—É—Ç–æ –Ω–∞ ${isDark ? '—Ç–µ–º–Ω—É' : '—Å–≤—ñ—Ç–ª—É'} —Ç–µ–º—É`);
}

// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∫–Ω–æ–ø–∫–∏ –∑–º—ñ–Ω–∏ —Ç–µ–º–∏
function init() {
    const button = document.getElementById('toggle-theme');
    
    // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —è–∫–∞ —Ç–µ–º–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–∞
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
        document.body.classList.add('dark-theme');
    }

    // –ü—Ä–∏–≤'—è–∑—É—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ—ó
    if (button) {
        button.addEventListener('click', toggleTheme);
        console.log('–ö–Ω–æ–ø–∫–∞ –∑–º—ñ–Ω–∏ —Ç–µ–º–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–∞');
    } else {
        console.warn('–ö–Ω–æ–ø–∫–∞ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∞!');
    }
}

// –ó–∞–ø—É—Å–∫ –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è DOM
document.addEventListener('DOMContentLoaded', init);


  </script>
  
</body>
</html>
